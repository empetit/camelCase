<!DOCTYPE html>
<html>
	<head>
		<title>CamelCase Mobile</title>
		<meta charset="utf-8">
		<meta name="description" content="place your description here" />
		<meta name="author" content="Your name">
		<meta name="keywords" content="Your keywords" />
		<!-- Optimized mobile viewport -->
		<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes"/>
		<meta name="apple-mobile-web-app-capable" content="yes" />
		<link rel="shortcut icon" href="images/favicon.ico">
		<link rel="apple-touch-icon" href="images/apple-touch-icon.png">
		<link rel="apple-touch-icon" sizes="72x72" href="images/apple-touch-icon-72x72.png">
		<link rel="apple-touch-icon" sizes="114x114" href="images/apple-touch-icon-114x114.png">

		<!-- CSS -->
		<!-- HTML5 IE Enabling Script -->
		<!--[if lt IE 9]><script src="libs/html5shiv.min.js"></script>
		<![endif]-->
	</head>
	<body onload="test()">
		<div class="container" style="text-align:center;margin-top:5em;perspective: 300;">
			<img src="app/images/arrow.png" id="imgLogo" class="logo">
			
		</div>
		<div>
		<center><p id="positionPhone">Coucou position phone</p></center>
		</div>
		<!-- JavaScript at the bottom for fast page loading -->
		<script src="/socket.io/socket.io.js"></script>
		<script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.1/jquery.min.js"></script>
		<script>window.jQuery || document.write('<script src="libs/jquery-1.10.1.min.js"><\/script>')</script>
		<script>
			var socket = io();
			socket.on('connection', function(socket){
			  console.log('YOOO');
			});
			function test(){
				//window.location.href = "sms:+375292771265?body=Hello from Appery.io!";

			}


			var ancienneValueLR = 0;
			var ancienneValueFB = 0;
			var ancienneDir = 0;
			if (window.DeviceOrientationEvent) {
			  // Listen for the deviceorientation event and handle the raw data
			  window.addEventListener('deviceorientation', function(eventData) {

			    // gamma is the left-to-right tilt in degrees, where right is positive

			    var tiltLR = eventData.gamma;

			    // beta is the front-to-back tilt in degrees, where front is positive
			    var tiltFB = eventData.beta;

			    // alpha is the compass direction the device is facing in degrees
			    var dir = eventData.alpha;
			    if(Math.abs(ancienneValueLR) - Math.abs(tiltLR) > 1  )	{
			    	ancienneValueLR = tiltLR;
				   $('#positionPhone').text('tiltLR : ' + tiltLR.substring(0, 3)  + '; tiltFB :' + tiltFB.substring(0, 3)  + '; dir :' + dir.substring(0, 3) );

			    }
			    // call our orientation event handler
			    deviceOrientationHandler(tiltLR, tiltFB, dir);
			  }, false);


  				window.addEventListener('devicemotion', deviceMotionHandler, false);

			}

			function deviceOrientationHandler(tiltLR, tiltFB, dir){

				// Apply the transform to the image
				var logo = document.getElementById("imgLogo");
				logo.style.webkitTransform =
				  "rotate("+ tiltLR +"deg) rotate3d(1,0,0, "+ (tiltFB*-1)+"deg)";
				logo.style.MozTransform = "rotate("+ tiltLR +"deg)";
				logo.style.transform =
				  "rotate("+ tiltLR +"deg) rotate3d(1,0,0, "+ (tiltFB*-1)+"deg)";
			}
			function deviceMotionHandler(eventData) {
			  var info, xyz = "[X, Y, Z]";

			  // Grab the acceleration from the results
			  var acceleration = eventData.acceleration;
			  info = xyz.replace("X", acceleration.x);
			  info = info.replace("Y", acceleration.y);
			  info = info.replace("Z", acceleration.z);

			  // Grab the acceleration including gravity from the results
			  acceleration = eventData.accelerationIncludingGravity;
			  info = xyz.replace("X", acceleration.x);
			  info = info.replace("Y", acceleration.y);
			  info = info.replace("Z", acceleration.z);

			  // Grab the rotation rate from the results
			  var rotation = eventData.rotationRate;
			  info = xyz.replace("X", rotation.alpha);
			  info = info.replace("Y", rotation.beta);
			  info = info.replace("Z", rotation.gamma);

			  // // Grab the refresh interval from the results
			  info = eventData.interval;
			}

		</script>
	</body>
</html>